(function(){tinymce.create("tinymce.plugins.Orchard.ImageEditor",{init:function(n,t){console.log("init: function (ed, url) {"),n.addCommand("mceImageEditor",function(){var i,t,r,u,f;if(console.log("ed.addCommand('mceImageEditor'"),n.focus(),t=n.selection.getContent(),t&&(t=t.replace(/\<IMG/gi,"<editimg"),r=$(t).filter("editimg"),r.length)){if(i={src:r.attr("src")},u=location.href.toLowerCase().indexOf("/admin/"),u===-1)return;f=location.href.substr(0,u)+"/Admin/Orchard.ImageEditor/Edit?src="+encodeURIComponent(i.src.split("?")[0]),$.colorbox({href:f,iframe:!0,reposition:!0,width:"100%",height:"100%",onLoad:function(){$("html, body").css("overflow","hidden"),$("#cboxClose").remove()},onClosed:function(){$("html, body").css("overflow",""),tinyMCE.execCommand("mceReplaceContent",!1,'<img src="'+i.src+"?rand="+Math.random()+'" >')}})}}),n.addButton("imageeditor",{title:"Edit Image",cmd:"mceImageEditor",image:t+"/img/picture_edit.png"}),n.onNodeChange.add(function(n,t,i){t.setDisabled("imageeditor",!(i.tagName=="IMG"))})},createControl:function(){return null},getInfo:function(){return{longname:"Orchard Image Editor Plugin",author:"The Orchard Team",authorurl:"http://orchardproject.net",infourl:"http://orchardproject.net",version:"1.1"}}}),tinymce.PluginManager.add("imageeditor",tinymce.plugins.Orchard.ImageEditor)})();
//@ sourceMappingURL=editor_plugin_src.min.js.map